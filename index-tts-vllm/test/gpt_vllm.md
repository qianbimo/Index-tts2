# 基础信息
RTX 4090
gpu_memory_utilization = 0.5
(EngineCore_DP0 pid=61946) INFO 10-24 01:36:20 [kv_cache_utils.py:868] Maximum concurrency for 1,818 tokens per request: 51.20x
max_num_seqs = 50

## Concurrency Level: 1

*   **Total Requests:** 5
*   **Total Time:** 21.68 s
*   **Total Throughput:** 272.56 tokens/s

| Metric                 | Min      | Max       | Mean      | P50       | P95       | P99       |
|------------------------|----------|-----------|-----------|-----------|-----------|-----------|
| TTFT (ms)              | 10.83    | 23.09     | 15.05     | 13.91     | 21.42     | 22.76     |
| Latency (ms)           | 4143.74  | 4624.17   | 4336.36   | 4242.69   | 4602.00   | 4619.74   |
| Num Generated Tokens   | 1182     | 1182      | 1182.00   | 1182      | 1182      | 1182      |

----------------------------------------

## Concurrency Level: 4

*   **Total Requests:** 20
*   **Total Time:** 23.62 s
*   **Total Throughput:** 1000.78 tokens/s

| Metric                 | Min      | Max       | Mean      | P50       | P95       | P99       |
|------------------------|----------|-----------|-----------|-----------|-----------|-----------|
| TTFT (ms)              | 11.88    | 66.41     | 23.87     | 15.56     | 63.59     | 65.84     |
| Latency (ms)           | 4475.67  | 5092.43   | 4721.80   | 4684.37   | 5090.55   | 5092.06   |
| Num Generated Tokens   | 1182     | 1182      | 1182.00   | 1182      | 1182      | 1182      |

----------------------------------------

## Concurrency Level: 8

*   **Total Requests:** 40
*   **Total Time:** 28.57 s
*   **Total Throughput:** 1654.76 tokens/s

| Metric                 | Min      | Max       | Mean      | P50       | P95       | P99       |
|------------------------|----------|-----------|-----------|-----------|-----------|-----------|
| TTFT (ms)              | 11.51    | 66.72     | 24.84     | 18.71     | 56.55     | 63.84     |
| Latency (ms)           | 5549.86  | 5928.19   | 5708.35   | 5670.35   | 5923.96   | 5926.91   |
| Num Generated Tokens   | 1182     | 1182      | 1182.00   | 1182      | 1182      | 1182      |

----------------------------------------

## Concurrency Level: 16

*   **Total Requests:** 80
*   **Total Time:** 37.04 s
*   **Total Throughput:** 2552.87 tokens/s

| Metric                 | Min      | Max       | Mean      | P50       | P95       | P99       |
|------------------------|----------|-----------|-----------|-----------|-----------|-----------|
| TTFT (ms)              | 11.92    | 102.98    | 37.23     | 26.75     | 91.33     | 100.72    |
| Latency (ms)           | 7297.13  | 7529.71   | 7398.85   | 7352.87   | 7528.42   | 7529.30   |
| Num Generated Tokens   | 1182     | 1182      | 1182.00   | 1182      | 1182      | 1182      |

----------------------------------------

## Concurrency Level: 32

*   **Total Requests:** 160
*   **Total Time:** 56.30 s
*   **Total Throughput:** 3359.33 tokens/s

| Metric                 | Min      | Max       | Mean      | P50       | P95       | P99       |
|------------------------|----------|-----------|-----------|-----------|-----------|-----------|
| TTFT (ms)              | 15.10    | 153.09    | 52.47     | 35.18     | 126.38    | 148.32    |
| Latency (ms)           | 10973.86 | 11487.38  | 11239.08  | 11281.69  | 11462.90  | 11478.07  |
| Num Generated Tokens   | 1182     | 1182      | 1182.00   | 1182      | 1182      | 1182      |

----------------------------------------

## Concurrency Level: 64

*   **Total Requests:** 320
*   **Total Time:** 100.63 s
*   **Total Throughput:** 3758.67 tokens/s

| Metric                 | Min      | Max       | Mean      | P50       | P95       | P99       |
|------------------------|----------|-----------|-----------|-----------|-----------|-----------|
| TTFT (ms)              | 50.24    | 15433.53  | 4084.72   | 147.73    | 15390.44  | 15423.79  |
| Latency (ms)           | 8665.13  | 30683.47  | 18928.13  | 15493.74  | 30598.44  | 30680.98  |
| Num Generated Tokens   | 1182     | 1182      | 1182.00   | 1182      | 1182      | 1182      |

----------------------------------------



# 分析

Concurrency 为 64 时触发了并发上限（max_num_seqs=50），因此后来的请求只能排队